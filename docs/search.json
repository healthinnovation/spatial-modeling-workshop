[
  {
    "objectID": "index.html#learning-objectives",
    "href": "index.html#learning-objectives",
    "title": "Spatial predictive models with R",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nUnderstanding the general concepts of ggplot2.\nLearning the many options of customizing a ggplot.\nGaining the major steps need to create engaging graphics.\nBeing able to generate complex plots without the need of post-processing."
  },
  {
    "objectID": "index.html#is-this-course-for-me",
    "href": "index.html#is-this-course-for-me",
    "title": "Graphic Design with ggplot2",
    "section": "Is this course for me?",
    "text": "Is this course for me?\nThis course will be appropriate for you if you answer yes to these questions:\n\nDo you aim to build graphics in a fully reproducible way without the need to manually adjust details afterwards?\nDo you enjoy using the {ggplot2} package but are interested in doing more with it?\nWould you like to learn how to improve future data visualizations in terms of accessibility, impact, and complexity?"
  },
  {
    "objectID": "license.html",
    "href": "license.html",
    "title": "License",
    "section": "",
    "text": "This work is licensed under a Creative Commons Attribution 4.0 International License."
  },
  {
    "objectID": "schedule.html",
    "href": "schedule.html",
    "title": "Schedule",
    "section": "",
    "text": "Day 1\nMonday, July 25, 2022\n\n\n\n\n\n\n\n\nTime\n\n\nModule\n\n\n\n\n\n\n\n\nNo matching items\n\n\n\n\nDay 2\nTuesday, July 26, 2022\n\n\n\n\n\n\n\n\nTime\n\n\nModule\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "installation.html",
    "href": "installation.html",
    "title": "Graphic Design with ggplot2",
    "section": "",
    "text": "In this section, you will install all the R packages that will be used in this workshop, just follow the steps set out in the following lines of code.\n\n\n\n\n\n\nObservation\n\n\n\n\nRemember it‚Äôs necessary to have previously installed R, Rtools, and Rstudio in your desktop.\nRtools is only necessary for Windows OS users. You can download Rtools here üì•."
  },
  {
    "objectID": "installation.html#set-up-my-rstudio-enviroment",
    "href": "installation.html#set-up-my-rstudio-enviroment",
    "title": "Graphic Design with ggplot2",
    "section": "üî¥ Set up my Rstudio enviroment",
    "text": "üî¥ Set up my Rstudio enviroment\nOpen Rstudio, then copy and paste the R code into the console and finally use enter.\n\n\npkgs <- c(\n  \"mapview\",\"sf\", \"tidyverse\",\n  \"rgee\",\"tidyrgee\",\"tidyterra\",\n  \"ggspatial\", \"terra\",\"patchwork\",\n  \"raster\",\"geojsonio\",\"viridis\",\n  \"stars\",\"mlr3\",\"mlr3spatiotempcv\"\n  )\ninstall.packages(pkgs)"
  },
  {
    "objectID": "installation.html#additional-documentation",
    "href": "installation.html#additional-documentation",
    "title": "Graphic Design with ggplot2",
    "section": "üî¥ Additional documentation",
    "text": "üî¥ Additional documentation\nrgee package need some extra configuration in your machine, in the next section you learning how set up and registration of credentials.\n\n\n\n\n\n\nObservation\n\n\n\n\nRemember it‚Äôs necessary to register a account in google earth engine with a gmail account.\nTo register on Google Earth Engine, you only need answer a few short questions.\n\n\n\nFor the installation of rgee dependencies, use the following function (this function can only be used once):\n\nrgee::ee_install()\n\nVideo\nFinally, with your gmail account verified, you can authenticate and initialise the Earth Engine R API in the following way.\nVideo"
  },
  {
    "objectID": "example01.html",
    "href": "example01.html",
    "title": "Spatial predictive models with R",
    "section": "",
    "text": "Before creating a spatial machine learning model, let‚Äôs explore some of the data sets available from Earth Engine using the rgee package within R. In this dataset there are climatic, environmental, vegetation and other variables that may be of interest.\n\n\n\n\n\n\n\nlibrary(rgee)\nlibrary(tidyrgee)\nlibrary(sf)\nlibrary(viridis)\nlibrary(ggplot2)\nlibrary(mapview)\nee_Initialize()\n#> ‚îÄ‚îÄ rgee 1.1.5 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ earthengine-api 0.1.326 ‚îÄ‚îÄ \n#>  ‚úî user: not_defined\n#>  ‚úî Initializing Google Earth Engine:\n ‚úî Initializing Google Earth Engine:  DONE!\n#> \n ‚úî Earth Engine account: users/ambarja \n#> ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\nThe Earth Engine DataSet has several variables, in this example, we are going to visualize the elevation and ndvi dataset.\n\n# Setup the colour palette with the elevation values\nviz = list(\n  min = 500,\n  max = 5000,\n  palette = rocket(n = 100,direction = -1)\n  )\n\n\n# Mapping the world elevation\nee$Image(\"CGIAR/SRTM90_V4\") %>%\n  Map$addLayer(name = \"Elevation\",visParams = viz) + \n  Map$addLegend(visParams = viz, name = \"Elevation\")\n\n\n\n\n\nExploring the MOD13Q1.061 dataset with tidyrgee and calculate the mean, sd, maximum and minimum NDVI and EVI value from 2000 to 2022.\n\nmodis_ic <- ee$ImageCollection$Dataset$MODIS_061_MOD13Q1 |> \n  as_tidyee()\n\n\nhead(modis_ic$vrt)\n#> # A tibble: 6 √ó 8\n#>   id            time_start          syste‚Ä¶¬π date       month  year   doy band_‚Ä¶¬≤\n#>   <chr>         <dttm>              <chr>   <date>     <dbl> <dbl> <dbl> <list> \n#> 1 MODIS/061/MO‚Ä¶ 2000-02-18 00:00:00 2000_0‚Ä¶ 2000-02-18     2  2000    49 <chr>  \n#> 2 MODIS/061/MO‚Ä¶ 2000-03-05 00:00:00 2000_0‚Ä¶ 2000-03-05     3  2000    65 <chr>  \n#> 3 MODIS/061/MO‚Ä¶ 2000-03-21 00:00:00 2000_0‚Ä¶ 2000-03-21     3  2000    81 <chr>  \n#> 4 MODIS/061/MO‚Ä¶ 2000-04-06 00:00:00 2000_0‚Ä¶ 2000-04-06     4  2000    97 <chr>  \n#> 5 MODIS/061/MO‚Ä¶ 2000-04-22 00:00:00 2000_0‚Ä¶ 2000-04-22     4  2000   113 <chr>  \n#> 6 MODIS/061/MO‚Ä¶ 2000-05-08 00:00:00 2000_0‚Ä¶ 2000-05-08     5  2000   129 <chr>  \n#> # ‚Ä¶ with abbreviated variable names ¬π‚Äãsystem_index, ¬≤‚Äãband_names\n\ntidyrgee allows works with the tidyverse sintaxis, with this package you could use the functions of dplyr (s3 method) like filter, group_by and summarise.\n\n# NDVI statistical using the group_by + summarise functions\nmodis_ndvi_yearly <- modis_ic |> \n  select(\"NDVI\") |> \n  filter(date>=\"2016-01-01\",date<=\"2019-12-31\") |> \n  group_by(year,month) |> \n  summarise(stat = \"mean\")\n\n\nhead(modis_ndvi_yearly$vrt)\n#> # A tibble: 6 √ó 8\n#>    year month dates‚Ä¶¬π numbe‚Ä¶¬≤ time_start          time_end            date      \n#>   <dbl> <dbl> <list>    <int> <dttm>              <dttm>              <date>    \n#> 1  2016     1 <dttm>        2 2016-01-01 00:00:00 2016-01-01 00:00:00 2016-01-01\n#> 2  2016     2 <dttm>        2 2016-02-02 00:00:00 2016-02-02 00:00:00 2016-02-02\n#> 3  2016     3 <dttm>        2 2016-03-05 00:00:00 2016-03-05 00:00:00 2016-03-05\n#> 4  2016     4 <dttm>        2 2016-04-06 00:00:00 2016-04-06 00:00:00 2016-04-06\n#> 5  2016     5 <dttm>        2 2016-05-08 00:00:00 2016-05-08 00:00:00 2016-05-08\n#> 6  2016     6 <dttm>        2 2016-06-09 00:00:00 2016-06-09 00:00:00 2016-06-09\n#> # ‚Ä¶ with 1 more variable: band_names <list>, and abbreviated variable names\n#> #   ¬π‚Äãdates_summarised, ¬≤‚Äãnumber_images\n\n\n\n\nMalaria is a disease that has a high recurrence in tropical places, this has multiple factors that condition its outbreak, including environmental and climatic factors has a high degree of significance, for this reason we will create a set of data to help predict their probability of occurrence using machine learning in the department of Loreto - Peru.\nThis malaria dataset ü¶ü reported is from 2018, click here to download.\nVariables to consider:\n\nTemperature üå°Ô∏è\nPrecipitation üåßÔ∏è\nNDVI üçÇ\n\nExploring spatial dataset of Malaria ü¶ü\n\nmalaria_db <- st_read(\"dataset/malariadb2018.gpkg\",quiet = T)\nhead(malaria_db)[1:4]\n#> Simple feature collection with 6 features and 4 fields\n#> Geometry type: POINT\n#> Dimension:     XY\n#> Bounding box:  xmin: -76.12383 ymin: -5.765671 xmax: -76.12383 ymax: -5.765671\n#> Geodetic CRS:  WGS 84\n#>       id_loc id2 nrohab      village                        geom\n#> 1 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n#> 2 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n#> 3 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n#> 4 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n#> 5 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n#> 6 1602010021   1    186 SANTA ISABEL POINT (-76.12383 -5.765671)\n\n\n# P. falciparum cases by province\nmalaria_db |>\n  group_by(province) |> \n  summarise(fal  = sum(fal,na.rm = T)) |> \n  ggplot(aes(x = reorder(province,fal),y = fal)) + \n  geom_bar(stat = \"identity\",fill = \"blue\",alpha = 0.6) + \n  coord_flip() + theme_minimal() + \n  labs(title = \"P.Falciparum cases\", x = \"\",y = \"\")\n\n# P. vivax cases by province\nmalaria_db |>\n  group_by(province) |> \n  summarise(viv  = sum(viv,na.rm = T)) |> \n  ggplot(aes(x = reorder(province,viv),y = viv)) + \n  geom_bar(stat = \"identity\",fill = \"blue\",alpha = 0.6) + \n  coord_flip() + theme_minimal() + \n  labs(title = \"P.vivax cases\", x = \"\",y = \"\")\n\n\n\n\n\n\n\n\n\n\n\nMapping the total cases of P. falciparum and P.vivax\n\n# Total cumulative cases per year \nmalaria_total <- malaria_db |> \n  group_by(village) |> \n  summarise(\n    fal = sum(fal,na.rm = T),\n    viv = sum(viv,na.rm = T)\n    )\n\n\n\n\n\n# Mapping P.falciparum\nm1 <- malaria_total |> \n  mapview(\n    zcol = \"fal\",\n    cex = \"fal\",\n    lwd = 0.01,\n    layer.name = \"P.falciparum\") \n\n#Mapping P.vivax\nm2 <- malaria_total |> \n  mapview(\n    zcol = \"viv\",\n    cex = \"viv\",\n    lwd = 0.01,\n    layer.name = \"P.vivax\")\n\nm1|m2\n#> Loading required namespace: leaflet.extras2\n\n\n\n\n\n\nPre-processing of selected variables (precipitation, temperature, NDVI and EVI) to create a complete dataset for modelling.\n\nloreto <- st_read(\"https://github.com/healthinnovation/sdb-gpkg/raw/main/box_loreto.gpkg\")|>\n  sf_as_ee()\n#> Reading layer `box_loreto' from data source \n#>   `https://github.com/healthinnovation/sdb-gpkg/raw/main/box_loreto.gpkg' \n#>   using driver `GPKG'\n#> Simple feature collection with 1 feature and 83 fields\n#> Geometry type: MULTIPOLYGON\n#> Dimension:     XY\n#> Bounding box:  xmin: -77.83596 ymin: -8.725191 xmax: -69.93904 ymax: -0.02860597\n#> Geodetic CRS:  WGS 84\n#> Registered S3 method overwritten by 'geojsonsf':\n#>   method        from   \n#>   print.geojson geojson\n\n\nterraclim_ic <-  ee$ImageCollection$\n  Dataset$IDAHO_EPSCOR_TERRACLIMATE |> \n  as_tidyee()\n\n\ndb_pp <- terraclim_ic |>\n  select(\"pr\") |> \n  filter(year == \"2018\") |> \n  group_by(year,month) |> \n  summarise(stat= \"sum\")\n\ndb_temp <- terraclim_ic |>\n  select(\"tmmx\") |> \n  filter(year == \"2018\") |> \n  group_by(year,month) |> \n  summarise(stat= \"sum\")\n\n\nviz_pp <- list(\n  min = 462,\n  max = 8272,\n  palette = mako(n = 10,direction = -1)\n)\n\nviz_temp <- list(\n  min = 9.78,\n  max = 32.67,\n  palette = rocket(n = 10)\n)\nMap$centerObject(loreto)\n#> NOTE: Center obtained from the first element.\n\nm1 <- Map$addLayer(db_pp$ee_ob$sum()$clip(loreto),visParams = viz_pp) + \n  Map$addLegend(visParams = viz_pp, \"Precipitation\",position = \"bottomleft\")\n\nm2 <- Map$addLayer(db_temp$ee_ob$mean()$multiply(0.1)$clip(loreto),visParams = viz_temp) + \n  Map$addLegend(visParams = viz_temp,name = \"Temperature\", position = \"bottomright\")\n\nm1 | m2"
  },
  {
    "objectID": "example01.html#section",
    "href": "example01.html#section",
    "title": "Graphic Design with ggplot2",
    "section": "üî¥ 2.",
    "text": "üî¥ 2."
  },
  {
    "objectID": "index.html#instructor",
    "href": "index.html#instructor",
    "title": "Spatial predictive models with R",
    "section": "Instructor",
    "text": "Instructor\n\nPhD. Gabriel Carrasco (he/him) Assistant Professor in Epidemiology at the School of Public Health and Associate Researcher at the Institute of Tropical Medicine ‚ÄúAlexander von Humboldt‚Äù, Universidad Peruana Cayetano Heredia (UPCH). Gabriel Carrasco is currently the director of the Health Innovation Lab and a board member of CLIMA, the Center for Latin-American Research on Climate Change and Health, both at UPCH. He earned his MS in Epidemiology at the School of Public Health, UPCH and is currently a PhD candidate in Public Health at the University of California, San Diego (UCSD)."
  }
]