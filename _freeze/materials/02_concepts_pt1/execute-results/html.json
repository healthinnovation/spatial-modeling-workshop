{
  "hash": "7f169827af20ee164ff3fb14d9896f93",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Concepts of the <code>{ggplot2}</code> Package Pt. 1:<br><span style='font-weight:500;'>Data, Aesthetics, and Layers + <span class='circle-highlight'>Misc Stuff</span></span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Cédric Scherer</a></b> **//** rstudio::conf **//** July 2022\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n# Setup\n\n##  {background-image=\"img/concepts/tidyverse-packages.png\" background-position=\"center\" background-size=\"100%\"}\n\n::: footer\n:::\n\n##  {background-image=\"img/concepts/tidyverse-packages-ggplot.png\" background-position=\"center\" background-size=\"100%\"}\n\n::: footer\n:::\n\n## The ggplot2 Package\n\n<br>\n\n... is an **R package to visualize data** created by Hadley Wickham in 2005\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-package-install-2_8c67cc8064671fea943557c9a1105dcf'}\n\n```{.r .cell-code}\n# install.packages(\"ggplot2\")\nlibrary(ggplot2)\n```\n:::\n\n\n<br>\n\n::: fragment\n... is part of the [`{tidyverse}`](https://www.tidyverse.org/)\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/tidyverse-package-install-2_e301efa2f2b59ba9d263d8e52537a254'}\n\n```{.r .cell-code}\n# install.packages(\"tidyverse\")\nlibrary(tidyverse)\n```\n:::\n\n:::\n\n# The Grammar of {ggplot2}\n\n\n\n## The Grammar of {ggplot2}\n\n<br>\n<table style='width:100%;font-size:14pt;'>\n  <tr>\n    <th>Component</th>\n    <th>Function</th>\n    <th>Explanation</th>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Data</b></td>\n    <td><code>ggplot(data)</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    <td>*The raw data that you want to visualise.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Aesthetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n    <td><code>aes()</code></td>\n    <td>*Aesthetic mappings between variables and visual properties.*</td>\n  <tr>\n    <td><b style='color:#67676;'>Geometries</b></td>\n    <td><code>geom_*()</code></td>\n    <td>*The geometric shapes representing the data.*</td>\n  </tr>\n</table>\n\n\n\n## The Grammar of {ggplot2}\n\n\n<br>\n<table style='width:100%;font-size:14pt;'>\n  <tr>\n    <th>Component</th>\n    <th>Function</th>\n    <th>Explanation</th>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Data</b></td>\n    <td><code>ggplot(data)</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n    <td>*The raw data that you want to visualise.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Aesthetics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b></td>\n    <td><code>aes()</code></td>\n    <td>*Aesthetic mappings between variables and visual properties.*</td>\n  <tr>\n    <td><b style='color:#67676;'>Geometries</b></td>\n    <td><code>geom_*()</code></td>\n    <td>*The geometric shapes representing the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Statistics</b></td>\n    <td><code>stat_*()</code></td>\n    <td>*The statistical transformations applied to the data.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Scales</b></td>\n    <td><code>scale_*()</code></td>\n    <td>*Maps between the data and the aesthetic dimensions.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Coordinate System</b></td>\n    <td><code>coord_*()</code></td>\n    <td>*Maps data into the plane of the data rectangle.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Facets</b></td>\n    <td><code>facet_*()</code></td>\n    <td>*The arrangement of the data into a grid of plots.*</td>\n  </tr>\n  <tr>\n    <td><b style='color:#67676;'>Visual Themes</b></td>\n    <td><code>theme()</code> and <code>theme_*()</code></td>\n    <td>*The overall visual defaults of a plot.*</td>\n  </tr>\n</table>\n\n\n\n# A Basic ggplot Example\n\n## The Data\n\n<b style='font-size:2.3rem;'>Bike sharing counts in London, UK, powered by [TfL Open Data](https://tfl.gov.uk/modes/cycling/santander-cycles)</b>\n\n::: incremental\n-   covers the years 2015 and 2016\n-   incl. weather data acquired from [freemeteo.com](https://freemeteo.com)\n-   prepared by Hristo Mavrodiev for [Kaggle](https://www.kaggle.com/hmavrodiev/london-bike-sharing-dataset)\n-   further modification by myself\n:::\n\n<br>\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/data-import_46453f7804c50eaf390c45d56ed9eb6e'}\n\n```{.r .cell-code}\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"),\n  ## or: \"https://raw.githubusercontent.com/z3tt/graphic-design-ggplot2/main/data/london-bikes-custom.csv\"\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n```\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/data-table_99c59f54a4869f34947f238d3815bedd'}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table lightable-minimal lightable-hover\" style=\"font-size: 24px; margin-left: auto; margin-right: auto; font-family: Cabinet Grotesk; \">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Variable </th>\n   <th style=\"text-align:left;\"> Description </th>\n   <th style=\"text-align:left;\"> Class </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> date </td>\n   <td style=\"text-align:left;\"> Date encoded as `YYYY-MM-DD` </td>\n   <td style=\"text-align:left;\"> date </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> day_night </td>\n   <td style=\"text-align:left;\"> `day` (6:00am–5:59pm) or `night` (6:00pm–5:59am) </td>\n   <td style=\"text-align:left;\"> character </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> year </td>\n   <td style=\"text-align:left;\"> `2015` or `2016` </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> month </td>\n   <td style=\"text-align:left;\"> `1` (January) to `12` (December) </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> season </td>\n   <td style=\"text-align:left;\"> `winter`, `spring`, `summer`, or `autumn` </td>\n   <td style=\"text-align:left;\"> factor </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> count </td>\n   <td style=\"text-align:left;\"> Sum of reported bikes rented </td>\n   <td style=\"text-align:left;\"> integer </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_workday </td>\n   <td style=\"text-align:left;\"> `TRUE` being Monday to Friday and no bank holiday </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_weekend </td>\n   <td style=\"text-align:left;\"> `TRUE` being Saturday or Sunday </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> is_holiday </td>\n   <td style=\"text-align:left;\"> `TRUE` being a bank holiday in the UK </td>\n   <td style=\"text-align:left;\"> logical </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> temp </td>\n   <td style=\"text-align:left;\"> Average air temperature (°C) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> temp_feel </td>\n   <td style=\"text-align:left;\"> Average feels like temperature (°C) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> humidity </td>\n   <td style=\"text-align:left;\"> Average air humidity (%) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> wind_speed </td>\n   <td style=\"text-align:left;\"> Average wind speed (km/h) </td>\n   <td style=\"text-align:left;\"> double </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> weather_type </td>\n   <td style=\"text-align:left;\"> Most common weather type </td>\n   <td style=\"text-align:left;\"> character </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## `ggplot2::ggplot()`\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-function_9b36934663dcf5c0ee0cc602da9378f3'}\n\n:::\n\n\n![](img/concepts/ggplot-fun-help.png){fig-alt=\"The help page of the ggplot() function.\" fig-width=\"175%\"}\n\n## Data\n\n\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-data_1893e7cec2cbba0cc6cabd23bd89e0c3'}\n\n```{.r .cell-code}\nggplot(data = bikes)\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-data-1.png){width=1000}\n:::\n:::\n\n\n## Aesthetic Mapping\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= link variables to graphical properties</b><br><br>\n\n::: incremental\n-   positions (`x`, `y`)\n-   colors (`color`, `fill`)\n-   shapes (`shape`, `linetype`)\n-   size (`size`)\n-   transparency (`alpha`)\n-   groupings (`group`)\n:::\n\n## Aesthetic Mapping\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-aesthetics-outside_8a261672e39d53f5d49b72da2d1cc4cb'}\n\n```{.r .cell-code  code-line-numbers=\"2|1,2\"}\nggplot(data = bikes) +\n  aes(x = temp_feel, y = count)\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-aesthetics-outside-1.png){width=1000}\n:::\n:::\n\n\n## <span style='color:#4758AB;'>aes</span>thetics\n\n`aes()` outside as component\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-aesthetics-outside-comp_99a368b4e3fa37d0b2baa0f7afc3de2d'}\n\n```{.r .cell-code}\nggplot(data = bikes) +\n  aes(x = temp_feel, y = count)\n```\n:::\n\n\n<br>\n\n::: fragment\n`aes()` inside, explicit matching\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-aesthetics-inside_d06cdc66b07516fab16b0ff93e071584'}\n\n```{.r .cell-code}\nggplot(data = bikes, mapping = aes(x = temp_feel, y = count))\n```\n:::\n\n\n<br>\n:::\n\n::: fragment\n`aes()` inside, implicit matching\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-aesthetics-inside-implicit_6852a31ef7f0e88f7c1f506a306afac6'}\n\n```{.r .cell-code}\nggplot(bikes, aes(temp_feel, count))\n```\n:::\n\n\n<br>\n:::\n\n::: fragment\n`aes()` inside, mixed matching\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-aesthetics-inside-mix_ee93b500890e5ca6251e6a31de89f7d5'}\n\n```{.r .cell-code}\nggplot(bikes, aes(x = temp_feel, y = count))\n```\n:::\n\n:::\n\n# Geometrical Layers\n\n## Geometries\n\n<br>\n\n<b class='simple-highlight-grn' style='font-size:2.6rem;'>= interpret aesthetics as graphical representations</b><br><br>\n\n::: incremental\n-   points\n-   lines\n-   polygons\n-   text labels\n-   ...\n:::\n\n## Geometries\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point_50db26f32d002f8046b51b119ebb5c56'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|5\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-1.png){width=1000}\n:::\n:::\n\n\n## Visual Properties of Layers\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-properties_2949b6b961e2477d09c0015fe7dcd2c3'}\n\n```{.r .cell-code  code-line-numbers=\"5,6,7,8,9,10,11|6,7,8,9,10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    color = \"#28a87d\",\n    alpha = .5,\n    shape = \"X\",\n    stroke = 1,\n    size = 4\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-properties-1.png){width=1000}\n:::\n:::\n\n\n## Setting vs Mapping of Visual Properties\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-point-properties-set_21a74a5c0b0c4273876b7890561d7bf8'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    color = \"#28a87d\",\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-properties-set-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-point-properties-map_6ff3268db9e3cfb4d4e1223719a4b252'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    aes(color = season),\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-properties-map-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n## Mapping Expressions\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression_8fa82a637fb9c5a78dc69ea2662880f5'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    aes(color = temp_feel > 20),\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-1.png){width=1000}\n:::\n:::\n\n\n## Your Turn!\n\n::: question\n-   **Create a scatter plot of `temp_feel` vs `temp`.**\n    -   Map the color of the points to clear weather.\n    -   Map the size of the points to count.\n    -   Turn the points into diamonds.\n    -   [Bonus: What do you notice in the legend? How could you fix it?]{style=\"color:#5DB699;\"}\n:::\n\n## Mapping Expressions\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise_6a4d9ddd6ca109d2016a6109f6af9450'}\n\n```{.r .cell-code  code-line-numbers=\"3|6\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\"),\n    alpha = .5,\n    size = 2\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-1.png){width=1000}\n:::\n:::\n\n\n## Mapping to Size\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-size-exercise_4923e312dc98fec412e32bc4fa60eafd'}\n\n```{.r .cell-code  code-line-numbers=\"7\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-size-exercise-1.png){width=1000}\n:::\n:::\n\n\n## Setting a Constant Property\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-shape_bf760cbd89f8fe2d3c75156849218123'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 18,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-shape-1.png){width=1000}\n:::\n:::\n\n\n## Setting a Constant Property\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-shape-2_a2287b382a7340ec3ed5cf7b10f05562'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 5,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-shape-2-1.png){width=1000}\n:::\n:::\n\n\n## Setting a Constant Property\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-shape-3_d55bc73aecbc351df83736eeb8fff12b'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 9,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-shape-3-1.png){width=1000}\n:::\n:::\n\n\n## Setting a Constant Property\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-shape-4_96443d973daa3008ae22b9d7a9aaf3d5'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 23,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-shape-4-1.png){width=1000}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n![Source: [Albert's Blog](https://blog.albertkuo.me/post/point-shape-options-in-ggplot/)](img/concepts/shapes-type.png){fig-alt=\"An overview of a set of available shapes, ordered by their type of shape (e.g. points, triangles etc).\" fig-width=\"150%\"}\n\n## Setting a Constant Property\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-shape-4-fill_b2c591f1fac2ad59e23a9aaf11baf4ac'}\n\n```{.r .cell-code  code-line-numbers=\"6,8,9\"}\nggplot(\n    bikes,\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(fill = weather_type == \"clear\",\n        size = count),\n    shape = 23,\n    color = \"black\",\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-shape-4-fill-1.png){width=1000}\n:::\n:::\n\n\n## Filter Data\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-na_8a7441d941d9432a7eaa8cf1db79a1cf'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(\n    filter(bikes, !is.na(weather_type)),\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 18,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-na-1.png){width=1000}\n:::\n:::\n\n\n## Filter Data\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-point-aes-expression-exercise-na-pipe_57cfb1fb90a443976537ea1eda16947e'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(\n    bikes %>% filter(!is.na(weather_type)),\n    aes(x = temp, y = temp_feel)\n  ) +\n  geom_point(\n    aes(color = weather_type == \"clear\",\n        size = count),\n    shape = 18,\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-expression-exercise-na-pipe-1.png){width=1000}\n:::\n:::\n\n\n\n\n## Local vs. Global Encoding\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-point-aes-geom_922edd4929bb31037c526b760fce1cfd'}\n\n```{.r .cell-code  code-line-numbers=\"3,6\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    aes(color = season),\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-geom-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-point-aes-global_6e607b9e747beb30378c8317c39e8a70'}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season)\n  ) +\n  geom_point(\n    alpha = .5\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-point-aes-global-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n## Adding More Layers\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth_fa9afb29a0dac9ef5bfd7bdd0d70a76a'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season)\n  ) +\n  geom_point(\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-1.png){width=1000}\n:::\n:::\n\n\n## Global Color Encoding\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth-aes-global_fc6f540625820e65226007105374af32'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,9,10,11\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season)\n  ) +\n  geom_point(\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-aes-global-1.png){width=1000}\n:::\n:::\n\n\n## Local Color Encoding\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth-aes-fixed_753389dff93ead3d433b9912d6d54a0a'}\n\n```{.r .cell-code  code-line-numbers=\"6,9,10,11\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    aes(color = season),\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-aes-fixed-1.png){width=1000}\n:::\n:::\n\n\n## The \\`group\\` Aesthetic\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth-aes-grouped_d3d1601b7747ec5dda45add7ba376962'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count)\n  ) +\n  geom_point(\n    aes(color = season),\n    alpha = .5\n  ) +\n  geom_smooth(\n    aes(group = day_night),\n    method = \"lm\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-aes-grouped-1.png){width=1000}\n:::\n:::\n\n\n## Set Both as Global Aesthetics\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth-aes-global-grouped_fdd7931ee5aed2587f58840f81767303'}\n\n```{.r .cell-code  code-line-numbers=\"4,5\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season,\n        group = day_night)\n  ) +\n  geom_point(\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-aes-global-grouped-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Global Aesthetics\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-smooth-aes-global-grouped-overwrite_4f5c36e13618bd83dd280669e614952f'}\n\n```{.r .cell-code  code-line-numbers=\"4,12\"}\nggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season,\n        group = day_night)\n  ) +\n  geom_point(\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\",\n    color = \"black\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-smooth-aes-global-grouped-overwrite-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Statistical Layers\n\n\n## \\`stat_\\*()\\` and \\`geom_\\*()\\`\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/stat-geom_99c952b6158084e5e19c278a0ededd50'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = temp_feel, y = count)) +\n  stat_smooth(geom = \"smooth\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-geom-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-stat_8ff32926d2d9491d0c55f6ac8bcc8a77'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = temp_feel, y = count)) +\n  geom_smooth(stat = \"smooth\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-stat-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n## \\`stat_\\*()\\` and \\`geom_\\*()\\`\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/stat-geom-2_2bfd3c8d04be6e4a5dec89949320286f'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = season)) +\n  stat_count(geom = \"bar\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-geom-2-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-stat-2_af57471cbf513abd89f23ad64c7c2e1b'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = season)) +\n  geom_bar(stat = \"count\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-stat-2-1.png){width=1000}\n:::\n:::\n\n:::\n\n\n## \\`stat_\\*()\\` and \\`geom_\\*()\\`\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/stat-geom-3_851c8e1ada8249f9ba3654f3741c41d6'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = date, y = temp_feel)) +\n  stat_identity(geom = \"point\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-geom-3-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/geom-stat-3_5961d72e46c22669df4fd89c2c5e9dfe'}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(bikes, aes(x = date, y = temp_feel)) +\n  geom_point(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-stat-3-1.png){width=1000}\n:::\n:::\n\n:::\n\n## Statistical Summaries\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/stat-summary_37349017007c8a7cc786280e4b3984f5'}\n\n```{.r .cell-code  code-line-numbers=\"5|3\"}\nggplot(\n    bikes, \n    aes(x = season, y = temp_feel)\n  ) +\n  stat_summary() \n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-summary-1.png){width=1000}\n:::\n:::\n\n\n\n## Statistical Summaries\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/stat-summary-defaults_62c60f97269c6bfa596aabbca99a6c47'}\n\n```{.r .cell-code  code-line-numbers=\"6,7\"}\nggplot(\n    bikes, \n    aes(x = season, y = temp_feel)\n  ) +\n  stat_summary(\n    fun.data = mean_se, ## the default\n    geom = \"pointrange\"  ## the default\n  ) \n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-summary-defaults-1.png){width=1000}\n:::\n:::\n\n\n\n## Statistical Summaries\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/stat-summary-median_c0c9ae92c02fd7674527cd007597ca1c'}\n\n```{.r .cell-code  code-line-numbers=\"5|5,6,11|6,7,8,9,10,11|7,8\"}\nggplot(\n    bikes, \n    aes(x = season, y = temp_feel)\n  ) +\n  geom_boxplot() +\n  stat_summary(\n    fun = mean,\n    geom = \"point\",\n    color = \"#28a87d\",\n    size = 3\n  ) \n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-summary-median-1.png){width=1000}\n:::\n:::\n\n\n\n## Statistical Summaries\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/stat-summary-custom_741f6a2c8fba48e4b5526a7e475b329f'}\n\n```{.r .cell-code  code-line-numbers=\"5,6,7,8,9|7,8\"}\nggplot(\n    bikes, \n    aes(x = season, y = temp_feel)\n  ) +\n  stat_summary(\n    fun = mean, \n    fun.max = function(y) mean(y) + sd(y), \n    fun.min = function(y) mean(y) - sd(y) \n  ) \n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/stat-summary-custom-1.png){width=1000}\n:::\n:::\n\n\n\n\n# Extending a ggplot\n\n## Store a ggplot as Object\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-object_facb739e1b813a8016eac98d37ace321'}\n\n```{.r .cell-code  code-line-numbers=\"1,16\"}\ng <-\n  ggplot(\n    bikes,\n    aes(x = temp_feel, y = count,\n        color = season,\n        group = day_night)\n  ) +\n  geom_point(\n    alpha = .5\n  ) +\n  geom_smooth(\n    method = \"lm\",\n    color = \"black\"\n  )\n\nclass(g)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"gg\"     \"ggplot\"\n```\n:::\n:::\n\n\n## Inspect a ggplot Object\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-object-data_d72cb77c3ee2d364b75afba500fde65f'}\n\n```{.r .cell-code}\ng$data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,454 x 14\n   date       day_night year  month season count is_workday is_weekend\n   <date>     <chr>     <fct> <fct> <fct>  <int> <lgl>      <lgl>     \n 1 2015-01-04 day       2015  1     winter  6830 FALSE      TRUE      \n 2 2015-01-04 night     2015  1     winter  2404 FALSE      TRUE      \n 3 2015-01-05 day       2015  1     winter 14763 TRUE       FALSE     \n 4 2015-01-05 night     2015  1     winter  5609 TRUE       FALSE     \n 5 2015-01-06 day       2015  1     winter 14501 TRUE       FALSE     \n 6 2015-01-06 night     2015  1     winter  6112 TRUE       FALSE     \n 7 2015-01-07 day       2015  1     winter 16358 TRUE       FALSE     \n 8 2015-01-07 night     2015  1     winter  4706 TRUE       FALSE     \n 9 2015-01-08 day       2015  1     winter  9971 TRUE       FALSE     \n10 2015-01-08 night     2015  1     winter  5630 TRUE       FALSE     \n# ... with 1,444 more rows, and 6 more variables: is_holiday <lgl>, temp <dbl>,\n#   temp_feel <dbl>, humidity <dbl>, wind_speed <dbl>, weather_type <chr>\n```\n:::\n:::\n\n\n## Inspect a ggplot Object\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-object-mapping_88c05ed54852352ea40cc35f89935bb4'}\n\n```{.r .cell-code}\ng$mapping\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAesthetic mapping: \n* `x`      -> `temp_feel`\n* `y`      -> `count`\n* `colour` -> `season`\n* `group`  -> `day_night`\n```\n:::\n:::\n\n\n## Extend a ggplot Object: Add Layers\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-object-extend-geom_cebbcc1041a8919b420cd8fda0a4e91c'}\n\n```{.r .cell-code}\ng +\n  geom_rug(\n    alpha = .2\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-object-extend-geom-1.png){width=1000}\n:::\n:::\n\n\n## Remove a Layer from the Legend\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/geom-guide-none_c31201866566265b59fcad44d97d1cd0'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  geom_rug(\n    alpha = .2,\n    show.legend = FALSE\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/geom-guide-none-1.png){width=1000}\n:::\n:::\n\n\n## Extend a ggplot Object: Add Labels\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-labs-individual_c7ebe74c6d04611c45a8429df382d4d6'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4\"}\ng +\n  xlab(\"Feels-like temperature (°F)\") +\n  ylab(\"Reported bike shares\") +\n  ggtitle(\"TfL bike sharing trends\")\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-individual-1.png){width=1000}\n:::\n:::\n\n\n## Extend a ggplot Object: Add Labels\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-labs-bundled_aa1b169c2198da09abbaf0d4d9a18f0d'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5,6\"}\ng +\n  labs(\n    x = \"Feels-like temperature (°F)\",\n    y = \"Reported bike shares\",\n    title = \"TfL bike sharing trends\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-bundled-1.png){width=1000}\n:::\n:::\n\n\n## Extend a ggplot Object: Add Labels\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-labs-bundled-color_205ce94d0fcc9576369f574da8de9e67'}\n\n```{.r .cell-code  code-line-numbers=\"6\"}\ng <- g +\n  labs(\n    x = \"Feels-like temperature (°F)\",\n    y = \"Reported bike shares\",\n    title = \"TfL bike sharing trends\",\n    color = \"Season:\"\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-bundled-color-1.png){width=1000}\n:::\n:::\n\n\n## Extend a ggplot Object: Add Labels\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-labs-bundled-extended_0c44d429213d4cdf7de88f999de1ae93'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,9\"}\ng +\n  labs(\n    x = \"Feels-like temperature (°F)\",\n    y = \"Reported bike shares\",\n    title = \"TfL bike sharing trends\",\n    subtitle = \"Reported bike rents versus feels-like temperature in London\",\n    caption = \"Data: TfL\",\n    color = \"Season:\",\n    tag = \"Fig. 1\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-bundled-extended-1.png){width=1000}\n:::\n:::\n\n\n## Extend a ggplot Object: Add Labels\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-labs-empty-vs-null-A_06da402603b3f1b6eff9f88055c7528d'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  labs(\n    x = \"\",\n    caption = \"Data: TfL\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-empty-vs-null-A-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-labs-empty-vs-null-B_789abc9fdc7dd00273d71f3a3397e894'}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ng +\n  labs(\n    x = NULL,\n    caption = \"Data: TfL\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-labs-empty-vs-null-B-1.png){width=1000}\n:::\n:::\n\n:::\n\n# A Polished ggplot Example\n\n## Extend a ggplot Object: Themes\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-object-extend-theme-light_1227bd55ba067667e014a5402cfc8e2d'}\n\n```{.r .cell-code}\ng + theme_light()\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-object-extend-theme-light-1.png){width=1000}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-object-extend-theme-minimal_e7e52947428089cdd8d2dd686a2767f7'}\n\n```{.r .cell-code}\ng + theme_minimal()\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-object-extend-theme-minimal-1.png){width=1000}\n:::\n:::\n\n:::\n:::\n\n## Change the Theme Base Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-extend-theme-base_34e7fd3063981ef9fb3c574f15d30ca8'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|1,2,3,4\"}\ng + theme_light(\n  base_size = 14,\n  base_family = \"Roboto Condensed\"\n)\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-extend-theme-base-1.png){width=1000}\n:::\n:::\n\n\n## Set a Theme Globally\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-global_f65ba18f8c0ca8b17968cc07d4e158ac'}\n\n```{.r .cell-code}\ntheme_set(theme_light())\n\ng\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-global-1.png){width=1000}\n:::\n:::\n\n\n## Change the Theme Base Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-global-base_c7a382d90bc7e8edefd4f06aa076d507'}\n\n```{.r .cell-code  code-line-numbers=\"2,3|1,2,3,4\"}\ntheme_set(theme_light(\n  base_size = 14,\n  base_family = \"Roboto Condensed\"\n))\n\ng\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-global-base-1.png){width=1000}\n:::\n:::\n\n\n## {systemfonts}\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/systemfonts_3808ccd19bfba5ec6854e997167b4336'}\n\n```{.r .cell-code  code-line-numbers=\"3,5,6,7,8|5,6,7,8\"}\n# install.packages(\"systemfonts\")\n\nlibrary(systemfonts)\n\nsystem_fonts() %>%\n  filter(str_detect(family, \"Cabinet\")) %>%\n  pull(name) %>%\n  sort()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"CabinetGrotesk-Black\"      \"CabinetGrotesk-Black\"     \n [3] \"CabinetGrotesk-Bold\"       \"CabinetGrotesk-Bold\"      \n [5] \"CabinetGrotesk-Extrabold\"  \"CabinetGrotesk-Extrabold\" \n [7] \"CabinetGrotesk-Extralight\" \"CabinetGrotesk-Extralight\"\n [9] \"CabinetGrotesk-Light\"      \"CabinetGrotesk-Light\"     \n[11] \"CabinetGrotesk-Medium\"     \"CabinetGrotesk-Medium\"    \n[13] \"CabinetGrotesk-Regular\"    \"CabinetGrotesk-Regular\"   \n[15] \"CabinetGrotesk-Thin\"       \"CabinetGrotesk-Thin\"      \n```\n:::\n:::\n\n\n## {systemfonts}\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/systemfonts-register_1ea4d91bf305fc4ba4850bb12d58cc35'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,34,5,6|1,2,3|4\"}\nregister_variant(\n  name = \"Cabinet Grotesk Black\",\n  family = \"Cabinet Grotesk\",\n  weight = \"heavy\",\n  features = font_feature(letters = \"stylistic\")\n)\n```\n:::\n\n\n## {systemfonts} + {ggplot2}\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/systemfonts-register-plot_5d7d175c39034dbb56f73bfbe298a01a'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  theme_light(\n    base_size = 18,\n    base_family = \"Cabinet Grotesk Black\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/systemfonts-register-plot-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Specific Theme Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-individual-1_6526ca3e1d74a3c26a825f75ff8e8477'}\n\n```{.r .cell-code  code-line-numbers=\"2|3\"}\ng +\n  theme(\n    panel.grid.minor = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-individual-1-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Specific Theme Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-individual-2_7cff3358ab41c93e0542ac6a45c0cb5e'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ng +\n  theme(\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(face = \"bold\")\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-individual-2-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Specific Theme Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-individual-3_286888a9e8411c0227e4b47ad08b22a3'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  theme(\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(face = \"bold\"),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-individual-3-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Specific Theme Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-individual-legend-none_81ae3e13d3de940f6a725cdc039633c0'}\n\n```{.r .cell-code  code-line-numbers=\"5\"}\ng +\n  theme(\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(face = \"bold\"),\n    legend.position = \"none\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-individual-legend-none-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Specific Theme Settings\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-individual-4_561d3eaea9d6530c72b8a60037e1b9d4'}\n\n```{.r .cell-code  code-line-numbers=\"6|2,3,4,6,7\"}\ng +\n  theme(\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(face = \"bold\"),\n    legend.position = \"top\",\n    plot.title.position = \"plot\"\n  )\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-individual-4-1.png){width=1000}\n:::\n:::\n\n\n## Overwrite Theme Settings Globally\n\n\n::: {.cell output-location='column' hash='02_concepts_pt1_cache/revealjs/ggplot-theme-settings-global_826ecbc34a0b529c4c63e07c9b6e1f2d'}\n\n```{.r .cell-code  code-line-numbers=\"1|2,3,4,5|1,2,3,4,5,6\"}\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n\ng\n```\n\n::: {.cell-output-display}\n![](02_concepts_pt1_files/figure-revealjs/ggplot-theme-settings-global-1.png){width=1000}\n:::\n:::\n\n\n## Save the Graphic\n\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-save_b99c7807be59adbd6ccb3a8d70933614'}\n\n```{.r .cell-code}\nggsave(g, filename = \"my_plot.png\")\n```\n:::\n\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-save-implicit_629bb7dd1648ecd4635b55d37c2695f8'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\")\n```\n:::\n\n:::\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-save-aspect_2a4ec259a293bb4b997ecf259acfb606'}\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 8, height = 5, dpi = 600)\n```\n:::\n\n:::\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-save-vector_65e23a1139f9a4baf3b95e860069229f'}\n\n```{.r .cell-code}\nggsave(\"my_plot.pdf\", width = 20, height = 12, unit = \"cm\", device = cairo_pdf)\n```\n:::\n\n:::\n\n::: fragment\n\n::: {.cell hash='02_concepts_pt1_cache/revealjs/ggplot-save-cairo_pdf_c738830387f033cbb58c6115fac2f551'}\n\n```{.r .cell-code}\ngrDevices::cairo_pdf(\"my_plot.pdf\", width = 10, height = 7)\ng\ndev.off()\n```\n:::\n\n:::\n\n------------------------------------------------------------------------\n\n<br>\n\n![Modified from canva.com](img/concepts/vector-raster-canva.png){fig-alt=\"A comparison of vector and raster graphics.\" fig-width=\"150%\"}\n\n## How to Work with Aspect Ratios\n\n::: incremental\n-   don't rely on the Rstudio viewer pane!\n-   once you have a \"it's getting close\" prototype, settle on a plot size<br><br>\n-   **Approach 1:** save the file to disk and inspect it; go back to your IDE\n    -   tedious and time-consuming...<br><br>\n-   **Approach 2:** use a qmd or rmd with inline output and chunk settings\n    -   set `fig.width` and `fig.height` per chunk or globally<br><br>\n-   **Approach 3:** use our [{camcorder} package](https://github.com/thebioengineer/camcorder)\n    -   saves output from all `ggplot()` calls and displays it in the viewer pane\n:::\n\n## Setting Plot Sizes in Rmd's\n\n![](img/concepts/plot-size-rmarkdown-example.png){fig-alt=\"A screenshot of an exemplary Rmd file with two chunks with different settings of fig.width and fig.height.\" fig-width=\"60%\"}\n\n## Setting Plot Sizes via {camcorder}\n\n<br>\n\n![](img/concepts/plot-size-camcorder-example.png){fig-alt=\"A screenshot of an exemplary R script with a plot automatically saved and isplayed in correct aspect ratio thanks to the camcorder package.\" fig-width=\"120%\"}\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   `{ggplot2}` is a powerful library for reproducible graphic design\n-   the components follow a consistent syntax\n-   each ggplot needs at least **data**, some **aesthetics**, and a **layer**\n-   we **set** constant propeties outside `aes()`\n-   ... and **map** data-related properties inside `aes()`\n-   local settings and mappings override global properties\n-   grouping allows applying layers for subsets\n-   we can store a ggplot object and extend it afterwards\n-   we can change the appearance for all plots with `theme_set()`<br>and `theme_update()`\n:::\n:::\n\n# Exercises\n\n## Exercise 1\n\n::: question\n-   Open the script `exercises/02_concepts_pt1_ex1.qmd`.\n-   Explore the TfL bike share data visually:<br>**create a timeseries of reported bike shares on weekend days**\n    -   Highlight day and night encoded by colors and shapes.\n    -   Connect the points of each period with lines.\n        -   What is the difference between `geom_line()` and `geom_path()`?\n    -   Apply your favorite theme to the plot.\n    -   Add meaningful labels.\n-   Save the plot as a vector graphic with a decent plot size.\n:::\n\n##  {background-image=\"img/exercises/exercise-what-now.png\" background-position=\"center\" background-size=\"65%\"}\n\n## Exercise 2\n\n::: question\n-   Open the script `exercises/02_concepts_pt1_ex2.qmd`.\n-   Explore the TfL bike sharing data visually:<br>**create a boxplot of counts per weather type**\n    -   Turn the plot into a jitter strips plot (random noise across the x axis)\n    -   Combine both chart types (jittered points on top of the boxplots)\n    -   [Bonus: Sort the boxplot-jitter hybrid by median counts]{style=\"color:#5DB699;\"}\n    -   Apply your favorite theme to the plot.\n    -   Add meaningful labels.\n    -   [Bonus: Explore other chart types to visualize the distributions.]{style=\"color:#5DB699;\"}\n-   Save the plot as a vector graphic with a decent plot size.\n:::\n\n##  {background-image=\"img/exercises/exercise-what-now.png\" background-position=\"center\" background-size=\"65%\"}\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}