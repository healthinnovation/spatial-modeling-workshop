{
  "hash": "cf1ed81b0c23fe5007fa106c86a1a1b3",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Working with Colors:<br><span style='font-weight:500;'>Solution Exercise 1</span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Cédric Scherer</a></b> **//** rstudio::conf **//** July 2022\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Exercise\n\n::: question\n-   **Create a similar visualization as close as possible:**\n:::\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/exercise-jittered-errorbars_da357b9e87d2d145593ac41e7b3bc05a'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/exercise-jittered-errorbars-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Import the Data Set\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/import-data-exercise_035bf5f7383cc6f68f6aaa0934a09edc'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  \"https://raw.githubusercontent.com/z3tt/graphic-design-ggplot2/main/data/london-bikes-custom.csv\",\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n```\n:::\n\n\n## Create Sina Plot\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-1_530f10eb6b0aa68ef9e5211778b18db6'}\n\n```{.r .cell-code  code-line-numbers=\"5,6,7,8,9|7\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  ggforce::geom_sina(\n    aes(color = day_night),\n    position = position_dodge(width = .6),\n    alpha = .5\n  ) +\n  theme_minimal(\n    base_size = 18,\n    base_family = \"Cabinet Grotesk\"\n  )\n```\n:::\n\n\n## Create Sina Plot\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-1_2e310a8ebb89381b4f33093be025cfe4'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-1-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Add Errorbars\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-2_3df3dfc7966c976483c7b7fd742ffc38'}\n\n```{.r .cell-code  code-line-numbers=\"10,11,12,13,14|6,11|7,12\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  ggforce::geom_sina(\n    aes(color = day_night),\n    position = position_dodge(width = .6),\n    alpha = .5\n  ) +\n  stat_summary(\n    aes(color = day_night),\n    position = position_dodge(width = .6),\n    size = .8\n  ) +\n  theme_minimal(\n    base_size = 18,\n    base_family = \"Cabinet Grotesk\"\n  )\n```\n:::\n\n\n## Add Errorbars\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-2_b24f13efa7e69a0a4abb2bfdf9f77a4f'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-2-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Use Lighter Point Colors\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-3_0bbc76f2c6ac1a3532119ffc96320950'}\n\n```{.r .cell-code  code-line-numbers=\"6,7,8,9\"}\nggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  ggforce::geom_sina(\n    aes(color = stage(\n      day_night,\n      after_scale = lighten(color, .6)\n    )),\n    position = position_dodge(width = .6),\n    alpha = .5\n  ) +\n  stat_summary(\n    aes(color = day_night),\n    position = position_dodge(width = .6),\n    size = .8\n  ) +\n  theme_minimal(\n    base_size = 18,\n    base_family = \"Cabinet Grotesk\"\n  )\n```\n:::\n\n\n## Use Lighter Point Colors\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-3_295f1a22320f7c089ff80e0d596a5f3d'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-3-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Use Standard Deviation\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-4_935839ad13e298d25de4baddbed0b522'}\n\n```{.r .cell-code  code-line-numbers=\"15,16,17\"}\np1 <- ggplot(\n    bikes,\n    aes(x = season, y = count)\n  ) +\n  ggforce::geom_sina(\n    aes(color = stage(\n      day_night,\n      after_scale = lighten(color, .6)\n    )),\n    position = position_dodge(width = .6),\n    alpha = .5\n  ) +\n  stat_summary(\n    aes(color = day_night),\n    fun = mean,\n    fun.max = function(y) mean(y) + sd(y),\n    fun.min = function(y) mean(y) - sd(y),\n    position = position_dodge(width = .6),\n    size = .8\n  ) +\n  theme_minimal(\n    base_size = 18,\n    base_family = \"Cabinet Grotesk\"\n  )\n\np1\n```\n:::\n\n\n## Add Annotations\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-4_b847c81fe23677ddc15457f124094b9c'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-4-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Add Annotations\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-5_e6ced5d23fecc75e30e5a6694db1ace3'}\n\n```{.r .cell-code  code-line-numbers=\"2,3,4,5,6,7,8,9,10,11,12,13|3|6,7,8|10\"}\np2 <- p1 +\n  stat_summary(\n    geom = \"text\",\n    aes(\n      color = day_night,\n      label = paste0(\n        sprintf(\"%2.1f\", stat(y) / 1000), \"K\"\n      )\n    ),\n    position = position_dodge(width = .6),\n    hjust = -.2, family = \"Tabular\",\n    size = 5.5, fontface = \"bold\"\n  )\n\np2\n```\n:::\n\n\n## Add Annotations\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-5_3a6400e4d56e7dac607cc5361b60c0bd'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-5-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Adjust Axes + Clipping\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-6_a1fdaf9deb92eef6cf191d2ed03f28ac'}\n\n```{.r .cell-code  code-line-numbers=\"2|3,4,5|6,7,8,9,10\"}\np3 <- p2 +\n  coord_cartesian(clip = \"off\") +\n  scale_x_discrete(\n    labels = str_to_title\n  ) +\n  scale_y_continuous(\n    labels = scales::comma_format(),\n    expand = c(0, 0),\n    limits = c(0, NA)\n  )\n\np3\n```\n:::\n\n\n## Adjust Axes + Clipping\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-6_ba6a76fd35e5b9fcade6d99385c7c402'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-6-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Add Colors + Labels\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-7_2e375cc5f3fc5efaece7e6d39679ae03'}\n\n```{.r .cell-code  code-line-numbers=\"1|4,5,6|7,8,9,10,11\"}\ncolors <- c(\"#987708\", \"#663399\")\n\np4 <- p3  +\n  scale_color_manual(\n    values = colors\n  ) +\n  labs(\n    x = NULL, y = NULL,\n    title = paste0(\"Reported bike shares in London during <span style='color:\", colors[1], \";'>day</span> and <span style='color:\", colors[2], \";'>night</span> times\"),\n    subtitle = \"TfL bike sharing data from 2015 to 2016 per season and time of day.\\nErrorbars show the mean ± standard deviation.\"\n  )\n\np4\n```\n:::\n\n\n## Add Colors + Labels\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-7_47ca3c36a76622acdb8db4f666d94142'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-7-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Theme Styling\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-8_ae4a3caf795430bb98aa7208770a0761'}\n\n```{.r .cell-code  code-line-numbers=\"2|3,4|5,6,7|8,9|10|11\"}\np4 +\n  theme(\n    legend.position = \"none\",\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor = element_blank(),\n    plot.title.position = \"plot\",\n    plot.title = ggtext::element_markdown(face = \"bold\", size = 26),\n    plot.subtitle = element_text(color = \"grey30\", margin = margin(t = 6, b = 12)),\n    axis.text.x = element_text(size = 17, face = \"bold\"),\n    axis.text.y = element_text(family = \"Tabular\"),\n    axis.line.x = element_line(size = 1.2, color = \"grey65\"),\n    plot.margin = margin(rep(15, 4))\n  )\n```\n:::\n\n\n## Theme Styling\n\n\n::: {.cell layout-align=\"center\" hash='07_colors_ex1_solution_cache/revealjs/colors-exercise-ex-1-8_581090dab2047eb1658a0ee768a224b0'}\n::: {.cell-output-display}\n![](07_colors_ex1_solution_files/figure-revealjs/colors-exercise-ex-1-8-1.png){fig-align='center' width=2000}\n:::\n:::\n\n\n## Full Code\n\n\n::: {.cell hash='07_colors_ex1_solution_cache/revealjs/exercise-jittered-errorbars-full-code_fcfa618367375bd281e957f99a01678f'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(colorspace)\nlibrary(ggtext)\n\nbikes <- readr::read_csv(\n  \"https://raw.githubusercontent.com/z3tt/graphic-design-ggplot2/main/data/london-bikes-custom.csv\",\n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ncolors <- c(\"#987708\", \"#663399\")\n\nggplot(bikes, aes(x = season, y = count)) +\n  ggforce::geom_sina(\n    aes(\n      color = stage(\n        day_night, after_scale = lighten(color, .6)\n    )),\n    position = position_dodge(width = .6),\n    alpha = .5\n  ) +\n  stat_summary(\n    aes(color = day_night),\n    position = position_dodge(width = .6),\n    fun = mean,\n    fun.max = function(y) mean(y) + sd(y),\n    fun.min = function(y) mean(y) - sd(y),\n    size = .8\n  ) +\n  stat_summary(\n    geom = \"text\",\n    aes(\n      color = day_night,\n      label = paste0(sprintf(\"%2.1f\", stat(y) / 1000), \"K\")\n    ),\n    position = position_dodge(width = .6),\n    hjust = -.2, size = 5.5, family = \"Tabular\", fontface = \"bold\"\n  ) +\n  coord_cartesian(clip = \"off\") +\n  scale_x_discrete(\n    labels = str_to_title\n  ) +\n  scale_y_continuous(\n    labels = scales::comma_format(),\n    expand = c(0, 0),\n    limits = c(0, NA)\n  ) +\n  scale_color_manual(values = colors) +\n  labs(\n    x = NULL, y = NULL,\n    title = paste0(\"Reported bike shares in London during <span style='color:\", colors[1], \";'>day</span> and <span style='color:\", colors[2], \";'>night</span> times\"),\n    subtitle = \"TfL bike sharing data from 2015 to 2016 per season and time of day.\\nErrorbars show the mean ± standard deviation.\"\n  ) +\n  theme_minimal(base_size = 18, base_family = \"Cabinet Grotesk\") +\n  theme(\n    legend.position = \"none\",\n    panel.grid.major.x = element_blank(),\n    panel.grid.minor = element_blank(),\n    plot.title.position = \"plot\",\n    plot.title = element_markdown(face = \"bold\", size = 26),\n    plot.subtitle = element_text(color = \"grey30\", margin = margin(t = 6, b = 12)),\n    axis.text.x = element_text(size = 17, face = \"bold\"),\n    axis.text.y = element_text(family = \"Tabular\"),\n    axis.line.x = element_line(size = 1.2, color = \"grey65\"),\n    plot.margin = margin(rep(15, 4))\n  )\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}