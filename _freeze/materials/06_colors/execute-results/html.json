{
  "hash": "73fbcd953807dd807551c72e92c5bd03",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Working with Colors</span></span>\"\nauthor: \"<b style='color:#28a87d;'>Cédric Scherer</b> **//** rstudio::conf **//** July 2022\"\nformat: \n  revealjs: \n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk: \n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Setup\n\n\n::: {.cell hash='06_colors_cache/revealjs/prep_f6255617a5e873fa07f8de4547f37b76'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nlibrary(tidyverse)\n\nbikes <- readr::read_csv(\n  here::here(\"data\", \"london-bikes-custom.csv\"), \n  col_types = \"Dcfffilllddddc\"\n)\n\nbikes$season <- forcats::fct_inorder(bikes$season)\n\ntheme_set(theme_light(base_size = 14, base_family = \"Roboto Condensed\"))\n\ntheme_update(\n  panel.grid.minor = element_blank(),\n  plot.title = element_text(face = \"bold\"),\n  legend.position = \"top\",\n  plot.title.position = \"plot\"\n)\n```\n:::\n\n\n# Color Palettes\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis_611c1199c0521fe2b8019a8b4a6fd522'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-month_a199b4efb98e972d28463d04b80e9c4c'}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = month)\n  ) +\n  geom_boxplot() +\n  scale_fill_viridis_d(\n    option = \"plasma\",\n    begin = .3\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-month-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-cont_50ec801f2ccbaeb53336c463efe1d6c4'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-cont-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Viridis\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-viridis-cont-rev_7a568bd16c02b64d446edcf1d0519586'}\n\n```{.r .cell-code  code-line-numbers=\"10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_viridis_c(\n    option = \"plasma\",\n    end = .9,\n    direction = -1\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-viridis-cont-rev-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-brewer_74af54338635509e8a994858cae1e201'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_brewer(\n    palette = \"Set1\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-1.png){width=1000}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-brewer-show-all_2627e5e522624fdcc972ed6a87fa2641'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-show-all-1.png){width=2400}\n:::\n:::\n\n\n## Pre-Defined Color Palettes: Brewer\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-brewer-show-cvd_9e0e42d1caf5afa8aff651efafdac664'}\n\n```{.r .cell-code}\nRColorBrewer::display.brewer.all(colorblindFriendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-brewer-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto_d27263a4cb76529d49824e09a9a296db'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    palette = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-1.png){width=1000}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-show-all_2463f4cf4fe6da179dcf0dba8cc00cf9'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {rcartocolor}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-show-cvd_419dda5320bb7bd7136464ce4648a06b'}\n\n```{.r .cell-code}\nrcartocolor::display_carto_all(colorblind_friendly = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-scico_9e8cab04f4cfb43c4d1b84f896130bda'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"scico\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scico::scale_fill_scico_d(\n    palette = \"hawaii\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-1.png){width=1000}\n:::\n:::\n\n\n## {scico}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-scico-show-all_a54e3e29712e7cd2fb1b4fe097c73449'}\n\n```{.r .cell-code}\nscico::scico_palette_show()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {ggsci} and {ggthemes}\n\n::: {layout-ncol=\"2\"}\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-ggsci_3e25afe9922de31aefe270dbd7cb85b0'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggsci\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggsci::scale_fill_npg()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-ggsci-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-ggthemes_cd2651f511d74d7e28c0454eb4c002dc'}\n\n```{.r .cell-code  code-line-numbers=\"8\"}\n# install.packages(\"ggthemes\")\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  ggthemes::scale_fill_gdocs()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-ggthemes-1.png){width=1000}\n:::\n:::\n\n:::\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-nord_7daddf656a4c36a5d1e1103b81e6f707'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  nord::scale_fill_nord(\n    palette = \"aurora\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-nord-1.png){width=1000}\n:::\n:::\n\n\n## {nord}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-nord-cont_09d1e08770f73a50fbaeac53f64bbd85'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12\"}\n# install.packages(\"nord\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  nord::scale_color_nord(\n    palette = \"silver_mine\",\n    discrete = FALSE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-nord-cont-1.png){width=1000}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-metbrewer_55b98d37099e9013504603700308876a'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  MetBrewer::scale_fill_met_d(\n    name = \"Klimt\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-1.png){width=1000}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-show-all_35547c930562a8e2c9f68efd25eb1ede'}\n\n```{.r .cell-code}\nMetBrewer::display_all()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-show-all-1.png){width=2400}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-show-cvd_958735e9aaee0476b366d06bf1e4fa90'}\n\n```{.r .cell-code}\nMetBrewer::display_all(colorblind_only = TRUE)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-show-cvd-1.png){width=2400}\n:::\n:::\n\n\n## {MetBrewer}\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-metbrewer-cont_33db2f86173135b9a15edaa39fc04147'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\n# install.packages(\"MetBrewer\")\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  MetBrewer::scale_color_met_c(\n    name = \"Hiroshige\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-cont-1.png){width=1000}\n:::\n:::\n\n\n# Customize Palettes\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-default_d35e6dee745faa59bf3b795995fffb19'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  rcartocolor::scale_fill_carto_d(\n    name = \"Vivid\" \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-default-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-manual_c8af344851c5665a4c151517a41dbd7b'}\n\n```{.r .cell-code  code-line-numbers=\"9,10,11,12,13\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 4\n    )\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-manual-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom_2967a2fc51acfcf037753208f25176af'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 5\n    )[1:4]\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom-2_602fc684ffc6fbaea4f370183d56a3f9'}\n\n```{.r .cell-code  code-line-numbers=\"11,12\"}\nlibrary(\"rcartocolor\")\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_pal(\n      name = \"Vivid\", n = 6\n    )[c(1, 3:5)]\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-custom-assign_02757edc3725ba344a9be31e53db3eba'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4|13\"}\ncarto_custom <- \n  carto_pal(\n    name = \"Vivid\", n = 6\n  )[c(1, 3:5)]\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-custom-assign-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-light_5ce7299c7d1c4986ab86a0bc78c0ad23'}\n\n```{.r .cell-code  code-line-numbers=\"2,4|13\"}\n# install.packages(\"colorspace\")\nlibrary(colorspace)\n\ncarto_light <- lighten(carto_custom, .8)\n\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_light\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-light-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale_c44bfb629474943f0190d65bd9e6259a'}\n\n```{.r .cell-code  code-line-numbers=\"12|6,7,8,9|6|7,9|8|\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(fill = season,\n        fill = after_scale(\n          lighten(fill, .8)\n    ))\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-stage_66cfaefad59401ff750c9417339b53c1'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9,10,11|7|9|10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(\n      fill = stage(\n        season,\n        after_scale =\n          lighten(fill, .8)\n      )\n    )\n  ) +\n  scale_fill_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-stage-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-2_400c494aeffe221629bc9e8bcee2d9e9'}\n\n```{.r .cell-code  code-line-numbers=\"6,11|7,8,9\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n    ))\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined_4c10cdd35b0190dbadc136be13103492'}\n\n```{.r .cell-code  code-line-numbers=\"11,12,13,14,15,16,17,18|13,14,15,16\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n    ))\n  ) +\n  geom_jitter(\n    aes(color = season), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined-2_9737ac51e7b5d29a43ee0b0bb09b0949'}\n\n```{.r .cell-code  code-line-numbers=\"12,13,14,15|14\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n    )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-2-1.png){width=1000}\n:::\n:::\n\n\n## Customize Existing Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-carto-afterscale-combined-3_dad1d9c604b0a8ffea8d26c14ae4657c'}\n\n```{.r .cell-code  code-line-numbers=\"13,14,15\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count)\n  ) +\n  geom_boxplot(\n    aes(color = season,\n        fill = after_scale(\n          lighten(color, .8)\n        ))\n  ) +\n  geom_jitter(\n    aes(color = season,\n        color = after_scale(\n          darken(color, .3)\n        )), \n    position = position_jitterdodge(\n      dodge.width = .75, \n      jitter.width = .2\n    ),\n    alpha = .4\n  ) +\n  scale_color_manual(\n    values = carto_custom\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-afterscale-combined-3-1.png){width=1000}\n:::\n:::\n\n\n# Create New Palettes\n\n## Create Sequential Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient_570173a11bc992a16ce19d05e5f81bbd'}\n\n```{.r .cell-code  code-line-numbers=\"7,10|8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient(\n    low = \"#28A87D\",\n    high = \"#FFD166\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2_484550ea3bd1530ac62108414491078c'}\n\n```{.r .cell-code  code-line-numbers=\"7,11|8,9,10|10\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey95\"\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2-midpoint_8e94916d30d6cd7412b8d683a8bd9ad1'}\n\n```{.r .cell-code  code-line-numbers=\"11\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10    \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-1.png){width=1000}\n:::\n:::\n\n\n## Create Diverging Palettes\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradient2-midpoint-limits_a390b719192984d7e7c25d32f3de7311'}\n\n```{.r .cell-code  code-line-numbers=\"12\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradient2(\n    low = \"#663399\",\n    high = \"#993334\",\n    mid = \"grey92\",\n    midpoint = 10,\n    limits = c(-10, 30)   \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradient2-midpoint-limits-1.png){width=1000}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradientn_888992e5079ab2352b0f9d222b22283c'}\n\n```{.r .cell-code  code-line-numbers=\"7,8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom  \n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradientn-1.png){width=1000}\n:::\n:::\n\n\n## Create Any Palette\n\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-gradientn-weight_a13b696ab996fc0d8ed92c7c54d3919e'}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = carto_custom,\n    values = c(0, .2, .8, 1)\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-gradientn-weight-1.png){width=1000}\n:::\n:::\n\n\n# Build Your Own<br>`scale_color|fill_*()`\n\n\n\n---\n\n![Illustration by W. E. B. Du Bois, Courtesy Library of Congress](img/colors/dubois-viz.png){fig-alt=\"“Black Lives 1900: W. E. B. Du Bois at the Paris Exposition” reprints some of the striking photographs and graphics that Du Bois and his curators commissioned for the World’s Fair, here the colorful stacked bar chart on income and expenditure of 150 negro families in Atlanta.\" fig-width=\"60%\"}\n\n##  {background-image=\"img/colors/dubois-colors.png\" background-position=\"center\" background-size=\"92%\" background-alt=\"Seven colors based on and inspired by the graphic from W. E. B. Du Bois.\"}\n\n## Build Your Own `scale_color|fill_*()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-function_2f52552105931949d1b1011d70e6924f'}\n\n```{.r .cell-code  code-line-numbers=\"1,18|2,3,4,5,6,7,8,9,10,11|13,14,15,16,17|20\"}\ndubois_colors <- function(...) {\n  dubois_cols <- c(\n    `black`    = \"#000000\",\n    `purple`   = \"#582f6c\",\n    `violet`   = \"#94679C\",\n    `pink`     = \"#ef849f\",\n    `softred`  = \"#f4b7a7\",\n    `iceblue`  = \"#bccbf3\",\n    `palegrey` = \"#e4e4e4\"\n  )\n\n  cols <- c(...)\n\n  if (is.null(cols))\n    return (dubois_cols)\n\n  dubois_cols[cols]\n}\n\ndubois_colors(\"black\", \"pink\", \"softred\", \"iceblue\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    black      pink   softred   iceblue \n\"#000000\" \"#ef849f\" \"#f4b7a7\" \"#bccbf3\" \n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_d()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-pal-d-function_c903e5a641fbb0f9963f7ff395492def'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,12,13|3|5,6,7,8|9|11|13|15\"}\ndubois_pal_d <- function(palette = \"default\", reverse = FALSE) {\n  function(n) {\n    if(n > 5) stop('Palettes only contains 5 colors')\n\n    if (palette == \"default\") { pal <- dubois_colors(\"black\", \"violet\", \"softred\", \"iceblue\", \"palegrey\")[1:n] }\n    if (palette == \"dark\") { pal <- dubois_colors(1:5)[1:n] }\n    if (palette == \"light\") { pal <- dubois_colors(3:7)[1:n] }\n    \n    pal <- unname(pal)\n\n    if (reverse) rev(pal) else pal\n  }\n}\n\ndubois_pal_d()(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#000000\" \"#94679C\" \"#f4b7a7\"\n```\n:::\n:::\n\n## Build Your Own `scale_fill|color_*_d()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-scale-discrete-functions_ba95b4c61877ee7a70c8c6937c346bd2'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14\"}\nscale_color_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"colour\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n\nscale_fill_dubois_d <- function(palette = \"default\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"default\", \"dark\", \"light\")) stop('Palette should be \"default\", \"dark\" or \"light\".')\n\n  pal <- dubois_pal_d(palette = palette, reverse = reverse)\n\n  ggplot2::discrete_scale(\"fill\", paste0(\"dubois_\", palette), palette = pal, ...)\n}\n```\n:::\n\n## Use Your Own `scale_fill_*_d()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-fill-d-use_ce22ca33be8f7c5bb257fff4f4b55ebb'}\n\n```{.r .cell-code  code-line-numbers=\"4,7\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_dubois_d()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-fill-d-use-1.png){width=1000}\n:::\n:::\n\n## Use Your Own `scale_color_*_d()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-d-use_cd0aae1fd6e050b8065d34d6358c8eb2'}\n\n```{.r .cell-code  code-line-numbers=\"4,7,8,9,10\"}\nggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        color = season)\n  ) +\n  geom_boxplot() +\n  scale_color_dubois_d(\n    palette = \"dark\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-d-use-1.png){width=1000}\n:::\n:::\n\n\n# Test Your Palettes\n\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-deutan_8e6fbbdceee6ed038b12df8899d7614e'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6|14,15,16\"}\ndeut <- \n  colorspace::deutan(\n    viridis::turbo(\n      n = 100, direction = -1\n    )\n  )\n\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count,\n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_gradientn(\n    colors = deut\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-deutan-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-all-prep_6da29e41bd7614c7cff4a5e19ce09028'}\n\n```{.r .cell-code}\ng <- \n  ggplot(\n    bikes, \n    aes(x = day_night, y = count, \n        fill = season)\n  ) +\n  geom_boxplot() +\n  scale_fill_manual(\n    values = carto_custom\n  )\n\ng\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-prep-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/cvd-emulation-all_305c126759b7473382eeaecdea3d3563'}\n\n```{.r .cell-code}\n# devtools::install_github(\n#   \"clauswilke/colorblindr\"\n# )\n\ncolorblindr::cvd_grid(g)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-1.png){width=1000}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-2-prep_8356bed38465fc514f0cd699a82e4356'}\n\n:::\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-2_0979b047993d29857623e62a2d8349e4'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g2)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-2-1.png){width=2800}\n:::\n:::\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-3-prep_8d2f6546a4a6e1a87f7250e3d1d557bd'}\n\n:::\n\n## Emulate CVD\n\n::: {.cell hash='06_colors_cache/revealjs/cvd-emulation-all-3_7faf5d844acf4f633f6219996aa8bd8e'}\n\n```{.r .cell-code}\n# devtools::install_github(\"clauswilke/colorblindr\")\n\ncolorblindr::cvd_grid(g3)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/cvd-emulation-all-3-1.png){width=2800}\n:::\n:::\n\n## <b style='color:#663399;'>Recap</b>\n\n::: recap\n::: incremental\n-   use **categorical** palettes for **qualitative** data\n    -  e.g. `scale_*_discrete()` and `scale_*_manual()` for custom options\n    -  e.g. `scale_*_viridis_d` and `scale_*_brewer()` for pre-defined options\n-   use **sequential or diverging** palettes for **quantitative** data\n    -  e.g. `scale_*_gradient()` or `scale_*_gradient2()` for custom options\n    -  e.g. `scale_*_viridis_c` and `scale_*_distiller()` for pre-defined options\n-   various packages provide palettes incl. `scale_*` components\n    - e.g. `{rcartocolors}`, `{scico}`, `{ggsci}`, `{ggthemes}`, `{nord}`\n-   those and even more packages return palettes as vectors\n    - modify and supply thehm to `scale_*_manual()` and `scale_*_gradientn()`\n-   use **`after_scale`** to modify and recycle color scales \n:::\n:::\n\n# Exercise\n\n## Exercise\n\n::: question\n-   **Create a similar visualization as close as possible:**\n:::\n\n::: {.cell layout-align=\"center\" hash='06_colors_cache/revealjs/exercise-jittered-errorbars_b3d89b1d3698a4ce556951b59d469aa8'}\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/exercise-jittered-errorbars-1.png){fig-align='center' width=2000}\n:::\n:::\n\n# Appendix\n\n# HCL Spectrum\n\n## Evaluate HCL Spectrum\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/color-palettes-colorspace-spec-explain_cbe3f4bb307ef391e59023e433e591a5'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  colorspace::diverging_hcl(\n    n = 100, palette = \"Blue-Red\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-colorspace-spec-explain-1.png){width=1000}\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-scico-spec_fcdbe3a9994e0d81eb972b45c061f8d2'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  scico::scico(\n    n = 100, palette = \"hawaii\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-scico-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-spec_a96242a2f5f94f1ec152c63da0f8d525'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Hiroshige\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-spec-1.png){width=1000}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-carto-spec_1ce148bdb1275dd66ff4f11e8a8191c6'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rcartocolor::carto_pal(\n    n = 7, name = \"TealRose\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-carto-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-metbrewer-spec-2_57b54ecf08a0c8d7e37578f8f9da2564'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  MetBrewer::met.brewer(\n     n = 100, name = \"Cassatt2\"\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-metbrewer-spec-2-1.png){width=1000}\n:::\n:::\n:::\n\n## Evaluate HCL Spectrum\n\n::: {layout-ncol=\"2\"}\n::: {.cell hash='06_colors_cache/revealjs/color-palettes-rainbow-spec_7612fc47800a5ea9da0b0fb64814dc5f'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  rainbow(\n    n = 100\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palettes-rainbow-spec-1.png){width=1000}\n:::\n:::\n\n::: {.cell hash='06_colors_cache/revealjs/color-palette-viridis-spec_2a0088644c2890716c47e96caa813e8c'}\n\n```{.r .cell-code}\ncolorspace::specplot(\n  viridis::turbo(\n     n = 100, direction = -1\n  )\n)\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/color-palette-viridis-spec-1.png){width=1000}\n:::\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-colors-pal-c-function_e477ab05a3834667fa18fb369ef88030'}\n\n```{.r .cell-code  code-line-numbers=\"1,13|2,3,4,5|7,8|10|12|15\"}\ndubois_pal_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  dubois_palettes <- list(\n    `dark`    = dubois_colors(\"black\", \"purple\", \"violet\", \"pink\"),\n    `light`   = dubois_colors(\"purple\", \"violet\", \"pink\", \"palered\")\n  )\n\n  pal <- dubois_palettes[[palette]]\n  pal <- unname(pal)\n\n  if (reverse) pal <- rev(pal)\n\n  grDevices::colorRampPalette(pal, ...)\n}\n\ndubois_pal_c(palette = \"light\", reverse = TRUE)(3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"#FFFFFF\" \"#C1759D\" \"#582F6C\"\n```\n:::\n:::\n\n## Build Your Own `scale_color|fill_*_c()`\n\n::: {.cell hash='06_colors_cache/revealjs/dubois-scale-continuous-functions_1b84277dd5604f19a095e9a4ca4c4ff9'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,4,5,6,7|9,10,11,12,13,14,15|2,10|4,12|6,14|\"}\nscale_fill_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_fill_gradientn(colours = pal(256), ...)\n}\n\nscale_color_dubois_c <- function(palette = \"dark\", reverse = FALSE, ...) {\n  if (!palette %in% c(\"dark\", \"light\")) stop('Palette should be \"dark\" or \"light\".')\n\n  pal <- dubois_pal_c(palette = palette, reverse = reverse)\n\n  ggplot2::scale_color_gradientn(colours = pal(256), ...)\n}\n```\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-c-use-1_81845dc94b691020a4a74daf28a90a3d'}\n\n```{.r .cell-code  code-line-numbers=\"3,4,7|7,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c()\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-c-use-1-1.png){width=1000}\n:::\n:::\n\n## Use Your Own `scale_color|fill_*_c()`\n\n::: {.cell output-location='column' hash='06_colors_cache/revealjs/dubois-scales-color-c-use-2_8a629fea8edc94f5fdcaf106c230580f'}\n\n```{.r .cell-code  code-line-numbers=\"8,9\"}\nggplot(\n    bikes, \n    aes(x = temp_feel, y = count, \n        color = temp_feel)\n  ) +\n  geom_point() +\n  scale_color_dubois_c(\n    palette = \"light\",\n    reverse = TRUE\n  )\n```\n\n::: {.cell-output-display}\n![](06_colors_files/figure-revealjs/dubois-scales-color-c-use-2-1.png){width=1000}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}