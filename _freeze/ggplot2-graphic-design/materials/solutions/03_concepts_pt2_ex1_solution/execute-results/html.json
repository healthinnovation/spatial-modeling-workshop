{
  "hash": "0c138d4fb245e4bee43533abd2d839b0",
  "result": {
    "markdown": "---\ntitle: \"Graphic Design with ggplot2\"\nsubtitle: \"<span style='font-size:1.75em;line-height:1.1;'>Concepts of the <code>{ggplot2}</code> Package Pt. 2:<br><span style='font-weight:500;'>Solution Exercise 1</span></span>\"\nauthor: \"<b style='color:#28a87d;'><a href='https://www.cedricscherer.com'>Cédric Scherer</a></b> **//** rstudio::conf **//** July 2022\"\nformat:\n  revealjs:\n    theme: css/style.scss\n    footer: '**[Cédric Scherer](https::/cedricscherer.com) //** rstudio::conf **//** July 2022'\n    #'rstudio::conf(workshop = \"Graphic Design with ggplot2\", instructor = \"Cédric Scherer\")'\n    transition: fade\n    progress: true\n    multiplex: false\n    preview-links: true\n    scrollable: false\n    hide-inactive-cursor: true\n    highlight-style: printing\n    chalkboard:\n      theme: whiteboard\n      boardmarker-width: 4\n      buttons: true\n    pause: true\n    mainfont: Cabinet Grotesk\neditor: source\nknitr:\n  opts_chunk:\n    dev: \"ragg_png\"\n    retina: 1\n    dpi: 200\nexecute:\n  freeze: auto\n  cache: true\n  echo: true\n  fig-width: 5\n  fig-height: 6\n---\n\n\n## Exercise 1\n\n::: question\n-   Have a look at the following visualization of the cumulative time that cosmo- and astronauts have spent in outer space. The data also contains information on the year of their first and last travel, respectively.\n-   Together with your group, discuss which layers and modifications are needed to create such a chart with `{ggplot2}`.\n    -   Note down the aesthetics, geometries, and scales used for each element of this graphic.\n    -   What is the coordinate system? Have any adjustments been made?\n    -   Which theme was used and how was it modified?\n:::\n\n------------------------------------------------------------------------\n\n### Layers\n\n::: incremental\n-   **`geom_point()`**\n    -   `aes(x = id, y = hours, size = hours)`\n-   **`geom_linerange()`**\n    -   `aes(x = id, ymin = 0, ymax = hours, color = hours, alpha = hours)`\n-   **`geom_point()`**\n    -   `aes(x = id, y = 0), shape = 15, color = \"#808080\"`\n-   **`geom_text()`**\n    -   `aes(x = id, y = 0, label = year), size = 4.5, hjust = 1.2`\n-   **`geom_text()`**\n    -   `aes(x = id, y = hours, label = max), size = 3.9, vjust = -.35`\n:::\n\n------------------------------------------------------------------------\n\n### Scales\n\n::: incremental\n-   **`scale_x_continuous()`**\n    -   `limits = c(-300, NA), expand = c(0, 0)`\n-   **`scale_y_continuous()`**\n    -   `limits = c(0, 230000), expand = c(0, 0)`\n-   **`scale_color_distiller()`**\n    -   `palette = \"YlGnBu, direction = -1`\n-   **`scale_size()`**\n    -   `range = c(.001, 3)`\n-   **`scale_alpha()`**\n    -   `range = c(.33, .95)`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n::: incremental\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n\n### Theme\n\n::: incremental\n-   **`theme_void()`**\n    -   `legend.position = \"none\"`\n    -   `plot.background = element_rect(fill = \"black\")`\n    -   `plot.margin = margin(-70, -70, -70, -70)`\n    -   `plot.caption = element_text(hjust = .5, margin = margin(-100, 0, 100, 0), ...)`\n:::\n\n------------------------------------------------------------------------\n\n### Coordinate System\n\n-   **`coord_polar()`**\n    -   `theta = \"y\"`\n\n### Theme\n\n-   **`theme_void()`**\n    -   `legend.position = \"none\"`\n    -   `plot.background = element_rect(fill = \"black\")`\n    -   `plot.margin = margin(-70, -70, -70, -70)`\n    -   `plot.caption = element_text(...)`\n\n### Title\n\n::: incremental\n-   **2 x `annotate(geom = \"text\", x = -300, y = 0, ...)`**\n:::\n\n## Data Prep\n\n\n::: {.cell hash='03_concepts_pt2_ex1_solution_cache/revealjs/import-data-astronauts_c6e6cb5c4b1315bb5e6f99920aaa632a'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ndf_astro <- readr::read_csv(\n  'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-07-14/astronauts.csv'\n)\n\ndf_missions <-\n  df_astro %>%\n  group_by(name) %>%\n  summarize(\n    hours = sum(hours_mission),\n    year = min(year_of_mission),\n    max_year = max(year_of_mission)\n  ) %>%\n  ungroup() %>%\n  mutate(year = -year) %>%\n  arrange(year) %>%\n  mutate(id = row_number())\n```\n:::\n\n\n## Code Pt. 1\n\n\n::: {.cell hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-blank_5aaeb16c99df1d3cffeeecb81f8c3785'}\n\n```{.r .cell-code}\n# install.packages(\"scico\")\n\ng1 <-\n  ggplot(df_missions, aes(x = id, y = hours, color = hours)\n    ) +\n    ## curves\n    geom_linerange(aes(ymin = 0, ymax = hours, alpha = hours), size = .25) +\n    ## baseline\n    geom_point(aes(y = 0), shape = 15, size = .1, color = \"#808080\") +\n    ## points\n    geom_point(aes(y = hours, size = hours)) +\n    ## turn into circular\n    coord_polar(theta = \"y\", start = 0, clip = \"off\") +\n    ## add axis spacings\n    scale_x_continuous(limits = c(-300, NA), expand = c(0, 0)) +\n    scale_y_continuous(limits = c(0, 23000), expand = c(0, 0)) +\n    ## change colors, transparencies, and bubble sizes\n    scale_color_distiller(palette = \"YlGnBu\", direction = -1) +\n    scale_size(range = c(.001, 3)) +\n    scale_alpha(range = c(.33, .95)) +\n    ## remove all theme components\n    theme_void() +\n    theme(\n      ## set dark background\n      plot.background = element_rect(fill = \"black\"),\n      ## remove \"white\" space\n      plot.margin = margin(-70, -70, -70, -70),\n      ## remove legends\n      legend.position = \"none\"\n    )\n```\n:::\n\n\n## Data Prep Labels\n\n\n::: {.cell hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-label-dfs_78d95103994db618ace1424bbad45e58'}\n\n```{.r .cell-code}\ndf_labs <-\n  df_missions %>%\n  filter(year %in% -c(1961, 197:201*10, 2019)) %>%\n  group_by(year) %>%\n  filter(id == min(id))\n\ndf_max <-\n  df_missions %>%\n  arrange(-hours) %>%\n  slice(1) %>%\n  mutate(\n    first_name = str_remove(name, \".*, \"),\n    last_name = str_remove(name, \"(?<=),.*\"),\n    label = paste(\"Between\", abs(year), \"and\", max_year, \",\\n\", first_name, last_name, \"has spent\\n\", format(hours, big.mark = ','), \"hours in space.\\nThat's roughly\", round(hours / 24, 0), \"days!\")\n  )\n```\n:::\n\n\n## Code Pt. 2\n\n\n::: {.cell hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-labels_7619b095965ce4ba18d8f320504bb782'}\n\n```{.r .cell-code}\ng2 <-\n  g1 +\n    ## labels years\n    geom_text(\n      data = df_labs, aes(y = 0, label = abs(year)),\n      family = \"Lato\", fontface = \"bold\", color = \"#808080\",\n      size = 4.5, hjust = 1.2\n    ) +\n    ## label max\n    geom_text(\n      data = df_max, aes(label = label),\n      family = \"Lato\", size = 3.9, vjust = -.35\n    ) +\n    ## title shadow\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .9,\n      size = 20, color = \"white\", hjust = .57, vjust = .45, alpha = .25\n    ) +\n    ## title\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .85,\n      size = 20, color = \"white\", hjust = .55, vjust = .4\n    ) +\n    ## caption\n    labs(caption = \"Cumulative time in outer space for all 565 cosmonauts and astronauts who participated\n    in space missions between April 23, 1961 and January 15, 2020, sorted by the year of their first mission.\n\n    Graphic: Cédric Scherer • Data: Stavnichuk & Corlett 2020 (DOI: 10.17632/86tsnnbv2w.1)\") +\n    ## modify caption + move inside plot area\n    theme(\n      plot.caption = element_text(\n        family = \"Lato\",\n        size = 15, color = \"#808080\", hjust = .5,\n        margin = margin(-100, 0, 100, 0)\n      )\n    )\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell layout-align=\"center\" hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-plot_479e2214c932016fa4e0279295bc6211'}\n::: {.cell-output-display}\n![](03_concepts_pt2_ex1_solution_files/figure-revealjs/astronout-viz-plot-1.png){fig-align='center' width=3000}\n:::\n:::\n\n\n## Code with Special Extensions\n\n\n::: {.cell hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-extensions_2bb29ae757f62cfc0b2ef654381bd512'}\n\n```{.r .cell-code  code-line-numbers=\"1,2,3,7,8,10,11,24,26\"}\n# install.packages(\"ggforce\")\n# install.packages(\"scico\")\n# devtools::install_github(\"coolbutuseless/ggblur\")\n\ng_ext <-\n  ggplot(df_missions, aes(x = id, y = hours, color = hours)) +\n    ## geom_link() from {ggforce} to draw smooth curves\n    ggforce::geom_link(aes(xend = id, yend = 0, alpha = hours), size = .25, n = 300) +\n    geom_point(aes(y = 0), shape = 15, size = .1, color = \"#808080\") +\n    ##geom_point_blur() from {ggblur} to add points with gradual fading\n    ggblur::geom_point_blur(aes(size = hours, blur_size = hours), blur_steps = 25) +\n    geom_text(\n      data = df_labs, aes(y = 0, label = abs(year)),\n      family = \"Lato\", fontface = \"bold\", color = \"#808080\",\n      size = 4.5, hjust = 1.2\n    ) +\n    geom_text(\n      data = df_max, aes(label = label),\n      family = \"Lato\", size = 3.9, vjust = -.35\n    ) +\n    coord_polar(theta = \"y\", start = 0, clip = \"off\") +\n    scale_x_continuous(limits = c(-300, NA), expand = c(0, 0)) +\n    scale_y_continuous(limits = c(0, 23000), expand = c(0, 0)) +\n    ## use custom color palette from {scico}\n    scico::scale_color_scico(palette = \"buda\") +\n    scale_size(range = c(.001, 3)) +\n    ggblur::scale_blur_size_continuous(range = c(.5, 10), guide = \"none\") +\n    scale_alpha(range = c(.33, .95)) +\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .9,\n      size = 20, color = \"white\", hjust = .57, vjust = .45, alpha = .25\n    ) +\n    annotate(\n      geom = \"text\", x = -300, y = 0, label = \"Travelling to\\nOuter Space\",\n      family = \"Boska\", fontface = \"bold\", lineheight = .85,\n      size = 20, color = \"white\", hjust = .55, vjust = .4\n    ) +\n    labs(caption = \"Cumulative time in outer space for all 565 cosmonauts and astronauts who participated\n    in space missions between April 23, 1961 and January 15, 2020, sorted by the year of their first mission.\n\n    Graphic: Cédric Scherer • Data: Stavnichuk & Corlett 2020 (DOI: 10.17632/86tsnnbv2w.1)\") +\n    theme_void() +\n    theme(\n      plot.background = element_rect(fill = \"black\"),\n      plot.margin = margin(-70, -70, -70, -70),\n      legend.position = \"none\",\n      plot.caption = element_text(\n        family = \"Lato\",\n        size = 15, color = \"#808080\", hjust = .5,\n        margin = margin(-100, 0, 100, 0)\n      )\n    )\n```\n:::\n\n\n------------------------------------------------------------------------\n\n\n::: {.cell layout-align=\"center\" hash='03_concepts_pt2_ex1_solution_cache/revealjs/astronout-viz-extensions-plot_a8d1815393571fa16ffd6212212fa45d'}\n::: {.cell-output-display}\n![](03_concepts_pt2_ex1_solution_files/figure-revealjs/astronout-viz-extensions-plot-1.png){fig-align='center' width=3000}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n\r\n      // dispatch for htmlwidgets\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for reveal\r\n    if (window.Reveal) {\r\n      window.Reveal.addEventListener(\"slidechanged\", function(event) {\r\n        fireSlideChanged(event.previousSlide, event.currentSlide);\r\n      });\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}